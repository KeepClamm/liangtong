(function(){"use strict";function e(t,o){function r(e,t){return function(){return e.apply(t,arguments)}}var i;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=t,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,u=s.length;c<u;c++)a[s[c]]=r(a[s[c]],a);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,o):r.call(t,e,n,o)},t.addEventListener=function(e,n,o){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):r.call(t,e,n,o)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(e){i(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i=o&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type&&"range"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],o){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,s,a,c,u,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,i&&(u=e.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=l.tagName.toLowerCase(),"label"===a){if(t=this.findControl(l),t){if(this.focus(l),n)return!1;l=t}}else if(this.needsFocus(l))return e.timeStamp-s>100||o&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),o&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return!(!o||r||(c=l.fastClickScrollParent,!c||c.fastClickLastScrollTop===c.scrollTop))||(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,o,r,i;if(void 0===window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]"),t){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(i>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e})(),function(){function e(e){return"object"===u(e)}function t(e){return null==e}function n(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function o(e,t){if(!t)throw new Error("Assertion Failed: "+e)}function r(e,t,n){var o=i(e,t);return void 0===o?n:o}function i(e,t){return o("Cannot call get with "+t+" key.",!!t),o("Cannot call get with '"+t+"' on an undefined object.",void 0!==e),-1!==t.indexOf(".")?s(e,t):e[t]}function s(e,t){var n,o=t.split("."),r=o.length;for(n=0;null!=e&&n<r;n++)e=i(e,o[n]);return e}function a(e,t,n,r){return o("Cannot call set with "+t+" key.",!!t),-1!==t.indexOf(".")?c(e,t,n,r):(o("You need to provide an object and key to `set`.",!!e&&void 0!==t),e[t]=n,n)}function c(e,t,n,o){var r=t.slice(t.lastIndexOf(".")+1);if(t=t===r?r:t.slice(0,t.length-(r.length+1)),!r||0===r.length)throw new Error("Property set failed: You passed an empty path");if(e=s(e,t),!e){if(o)return;throw new Error('Property set failed: object in path "'+t+'" could not be found or was destroyed.')}return a(e,r,n)}function u(e){var t=null==e?String(e):d[p.call(e)]||"object";return"object"===t&&(e instanceof Error?t="error":e instanceof Date&&(t="date")),t}function l(e,n){var s,a=i(n,"key"),c=i(n,"default"),u=i(n,"custom");return o("`key` or `default` should be defined",!t(u)||!(t(c)&&t(a))),s=t(u)?t(c)?i(e,a):t(a)?c:r(e,a,c):u(e),s}function h(e,n,r){var s=n.split("."),c="";s.forEach(function(n,u){o("path parts can't be empty",n.length),c.length?c+="."+n:c=n,u!==s.length-1?t(i(e,c))&&a(e,c,{}):a(e,c,r)})}var f,d={},p=Object.prototype.toString,m="Boolean Number String Function Array Date RegExp Object".split(" "),v=m.length;for(f=0;f<v;f++)d["[object "+m[f]+"]"]=m[f].toLowerCase();var g={map:function r(s,a){e(s)||o("`source` should be an object",!1),e(a)||o("`map` should be an object",!1);var c={},f=n(a);return f.forEach(function(n){var o=a[n],f=e(o)?l(s,o):i(s,o);"undefined"!==u(f)&&("array"===u(f)&&(f=f.map(function(e){var n=i(o,"map");return t(n)?e:r(e,n)})),h(c,n,f))}),c}};"function"==typeof define&&define.amd?define([],function(){return g}):"undefined"!=typeof exports?module.exports=g:window.jsonMapper=g}.call(this),function(e,t){var n=t();"object"==typeof module&&module&&(module.exports=n),"function"==typeof define&&define.amd&&define(t),e.PromisePolyfill=n,e.Promise||(e.Promise=n)}("undefined"!=typeof global?global:this,function(){function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function n(e){if(!(this instanceof n))throw new TypeError(this+"is not a promise");if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");var t=new o;this._resolver=t;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}function o(){this._callbacks=[],this._errbacks=[],this._status="pending",this._result=null}return t(n.prototype,{then:function(e,t){var o,r,i=new this.constructor(function(e,t){o=e,r=t});return this._resolver._addCallbacks("function"==typeof e?n._makeCallback(i,o,r,e):o,"function"==typeof t?n._makeCallback(i,o,r,t):r),i},catch:function(e){return this.then(void 0,e)}}),n._makeCallback=function(e,t,n,o){return function(r){var i;try{i=o(r)}catch(e){return void n(e)}i!==e?t(i):n(new TypeError("Cannot resolve a promise with itself"))}},n.resolve=function(e){return e&&e.constructor===this?e:new this(function(t){t(e)})},n.reject=function(e){var t=new this(function(){});return t._resolver._result=e,t._resolver._status="rejected",t},n.all=function(t){var n=this;return new n(function(o,r){function i(e){return function(t){u[e]=t,s--,s||o(u)}}if(e(t)){var s=t.length,a=0,c=t.length,u=[];if(c<1)return o(u);for(;a<c;a++)n.resolve(t[a]).then(i(a),r)}else r(new TypeError("Promise.all expects an array of values or promises"))})},n.race=function(t){var n=this;return new n(function(o,r){if(e(t))for(var i=0,s=t.length;i<s;i++)n.resolve(t[i]).then(o,r);else r(new TypeError("Promise.race expects an array of values or promises"))})},n.async="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof process&&process.nextTick?process.nextTick:function(e){setTimeout(e,0)},t(o.prototype,{fulfill:function(e){var t=this._status;"pending"!==t&&"accepted"!==t||(this._result=e,this._status="fulfilled"),"fulfilled"===this._status&&(this._notify(this._callbacks,this._result),this._callbacks=[],this._errbacks=null)},reject:function(e){var t=this._status;"pending"!==t&&"accepted"!==t||(this._result=e,this._status="rejected"),"rejected"===this._status&&(this._notify(this._errbacks,this._result),this._callbacks=null,this._errbacks=[])},resolve:function(e){"pending"===this._status&&(this._status="accepted",this._value=e,(this._callbacks&&this._callbacks.length||this._errbacks&&this._errbacks.length)&&this._unwrap(this._value))},_unwrap:function(e){var t,n=this,o=!1;if(!e||"object"!=typeof e&&"function"!=typeof e)n.fulfill(e);else try{t=e.then,"function"==typeof t?t.call(e,function(e){o||(o=!0,n._unwrap(e))},function(e){o||(o=!0,n.reject(e))}):n.fulfill(e)}catch(e){o||n.reject(e)}},_addCallbacks:function(e,t){var n=this._callbacks,o=this._errbacks;switch(n&&n.push(e),o&&o.push(t),this._status){case"accepted":this._unwrap(this._value);break;case"fulfilled":this.fulfill(this._result);break;case"rejected":this.reject(this._result)}},_notify:function(e,t){e.length&&n.async(function(){var n,o;for(n=0,o=e.length;n<o;++n)e[n](t)})}}),n.Resolver=o,n}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.urltemplate=t()}(this,function(){function e(){}return e.prototype.encodeReserved=function(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")},e.prototype.encodeUnreserved=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},e.prototype.encodeValue=function(e,t,n){return t="+"===e||"#"===e?this.encodeReserved(t):this.encodeUnreserved(t),n?this.encodeUnreserved(n)+"="+t:t},e.prototype.isDefined=function(e){return null!=e},e.prototype.isKeyOperator=function(e){return";"===e||"&"===e||"?"===e},e.prototype.getValues=function(e,t,n,o){var r=e[n],i=[];if(this.isDefined(r)&&""!==r)if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)r=r.toString(),o&&"*"!==o&&(r=r.substring(0,parseInt(o,10))),i.push(this.encodeValue(t,r,this.isKeyOperator(t)?n:null));else if("*"===o)Array.isArray(r)?r.filter(this.isDefined).forEach(function(e){i.push(this.encodeValue(t,e,this.isKeyOperator(t)?n:null))},this):Object.keys(r).forEach(function(e){this.isDefined(r[e])&&i.push(this.encodeValue(t,r[e],e))},this);else{var s=[];Array.isArray(r)?r.filter(this.isDefined).forEach(function(e){s.push(this.encodeValue(t,e))},this):Object.keys(r).forEach(function(e){this.isDefined(r[e])&&(s.push(this.encodeUnreserved(e)),s.push(this.encodeValue(t,r[e].toString())))},this),this.isKeyOperator(t)?i.push(this.encodeUnreserved(n)+"="+s.join(",")):0!==s.length&&i.push(s.join(","))}else";"===t?this.isDefined(r)&&i.push(this.encodeUnreserved(n)):""!==r||"&"!==t&&"?"!==t?""===r&&i.push(""):i.push(this.encodeUnreserved(n)+"=");return i},e.prototype.parse=function(e){var t=this,n=["+","#",".","/",";","?","&"];return{expand:function(o){return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){var s=null,a=[];if(-1!==n.indexOf(r.charAt(0))&&(s=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(e){var n=/([^:\*]*)(?::(\d+)|(\*))?/.exec(e);a.push.apply(a,t.getValues(o,s,n[1],n[2]||n[3]))}),s&&"+"!==s){var c=",";return"?"===s?c="&":"#"!==s&&(c=s),(0!==a.length?s:"")+a.join(c)}return a.join(",")}return t.encodeReserved(i)})}}},new e});